##ADD legend
<div id="legend" class="legend"></div>

var legend = L.control({ position: 'bottomright' });
legend.onAdd = function (map) {
  var div = L.DomUtil.create('div', 'legend');
  div.innerHTML += '<div class="legend-title">Club Colors</div>';
  
  for (var club in clubColors) {
    div.innerHTML += 
      '<div class="legend-item">' +
      '<div class="legend-color" style="background:' + clubColors[club] + '"></div>' +
      club + '</div>';
  }
  return div;
};
legend.addTo(map);


.legend {
    clear: both;
    padding: 5px;
    background: white;
    line-height: 1.5em;
  }
 
  .legend .legend-item {
    display: flex;
    align-items: center;
  }
  
  .legend .legend-color {
    width: 15px;
    height: 15px;
    margin-right: 5px;
    border: 1px solid #000;
  }


### ADD offset
  if (club === 'SPE') {
    slice.offset = 0.2;
  }

##ADD highlighting
  if (club === 'SPE') {
    style += 'stroke-color: #FF0000; stroke-width: 4; fill-opacity: 0.7;';
  }


  function drawAgeRegression() {
    var data = JSON.parse('{{ age_regress | safe }}');
    var dataTable = new google.visualization.DataTable();
    
    // Define the columns
    dataTable.addColumn('number', 'Age');
    dataTable.addColumn('number', 'Number of Competitions');
    dataTable.addColumn({ type: 'string', role: 'tooltip', 'p': {'html': true}});
    dataTable.addColumn({ type: 'string', role: 'style' });
  
    // Add rows with tooltips and styles
    dataTable.addRows(data.map(function(row) {
      var tooltip = '<div>' + row[2] + '</div><div>Number of Competitions: ' + row[1] + '</div>'; 
      var style = row[3] === 'SPE' ? 'point { fill-color: green; }' : 'point { fill-color: blue; }'; // Default color is blue
      return [row[0], row[1], tooltip, style];
    }));
  
    var options = {
      title: 'Number of Competitions vs Age',
      legend: { position: 'none' },
      hAxis: { title: 'Age' },
      vAxis: { title: 'Number of Competitions' },
      tooltip: { isHtml: true },
      trendlines: { 0: { type: 'linear', color: 'red', lineWidth: 2 } }
    };
  
    var chart = new google.visualization.ScatterChart(document.getElementById('age_regress'));
    chart.draw(dataTable, options);
  }